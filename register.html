<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å - NewsHub</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Prompt', sans-serif; background: #f5f5f5; color: #292D32; }
        .header { background: #292D32; color: white; position: sticky; top: 0; z-index: 1000; }
        .navbar { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; }
        .logo { font-size: 1.5rem; font-weight: 700; color: white; text-decoration: none; }
        .nav-menu { display: flex; gap: 2rem; list-style: none; }
        .nav-menu a { color: white; text-decoration: none; font-weight: 500; }
        .hamburger { display: none; flex-direction: column; gap: 4px; cursor: pointer; }
        .hamburger span { width: 25px; height: 3px; background: white; border-radius: 2px; }
        .register-container { max-width: 450px; margin: 3rem auto; background: white; padding: 2.5rem; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .register-container h1 { text-align: center; margin-bottom: 2rem; color: #292D32; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .form-group input { width: 100%; padding: 0.8rem 1rem; border: 1px solid #e0e0e0; border-radius: 8px; font-family: 'Prompt', sans-serif; font-size: 1rem; }
        .form-group input:focus { border-color: #292D32; outline: none; box-shadow: 0 0 0 2px rgba(41,45,50,0.1); }
        .form-group small { color: #666; font-size: 0.85rem; }
        .btn { padding: 0.8rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 500; transition: all 0.3s; border: none; cursor: pointer; width: 100%; font-size: 1rem; font-family: 'Prompt', sans-serif; }
        .btn-primary { background: #292D32; color: white; }
        .btn-primary:hover { background: #44484F; }
        .btn-primary:disabled { background: #ccc; cursor: not-allowed; }
        .login-link { text-align: center; margin-top: 1.5rem; color: #666; }
        .login-link a { color: #292D32; font-weight: 600; text-decoration: none; }
        .login-link a:hover { text-decoration: underline; }
        /* (‡∏•‡∏ö #confirmation-section CSS ‡∏≠‡∏≠‡∏Å) */
        @media (max-width: 968px) { .nav-menu { display: none; } .hamburger { display: flex; } }
        @media (max-width: 600px) { .register-container { margin: 1rem; padding: 1.5rem; } }
    </style>
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <a href="index.html" class="logo">üì∞üí¨ NewsHub</a>
            <ul class="nav-menu">
                <li><a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                <li><a href="index.html#forum">‡∏ü‡∏≠‡∏£‡∏±‡πà‡∏°</a></li>
            </ul>
            <div class="hamburger"><span></span><span></span><span></span></div>
        </nav>
    </header>

    <div class="register-container">
        <h1>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>
        
        <div id="register-section">
            <div class="form-group">
                <label for="reg-email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                <input type="email" id="reg-email" placeholder="youremail@example.com">
            </div>
            <div class="form-group">
                <label for="reg-password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                <input type="password" id="reg-password" placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£">
                <small>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</small>
            </div>
            <button id="btn-register" class="btn btn-primary">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
        </div>
        
        <div class="login-link">
            ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß? <a href="login.html">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
        </div>
    </div>

    <script>
        // --- START: NEW AUTH LOGIC (NO AMPLIFY) ---
        
        // ‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Invoke URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≤‡∏Å Phase 5
        const API_URL = 'https://tae6m8cy06.execute-api.us-east-1.amazonaws.com/prod'; 

        const btnRegister = document.getElementById('btn-register');

        btnRegister.addEventListener('click', async () => {
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;

            if (!email || !password) { alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô'); return; }
            if (password.length < 8) { alert('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£'); return; }

            btnRegister.innerText = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£...';
            btnRegister.disabled = true;

            try {
                const response = await fetch(API_URL + '/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: email,
                        password: password
                    })
                });

                const data = await response.json();

                if (response.status === 201) {
                    alert('‚úÖ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...');
                    // ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ login ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
                    window.location.href = 'login.html?email=' + encodeURIComponent(email);
                } else {
                    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Error ‡∏à‡∏≤‡∏Å Lambda (‡πÄ‡∏ä‡πà‡∏ô "This email is already registered")
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + data.message);
                }

            } catch (error) {
                console.error('Register error:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠');
            } finally {
                btnRegister.innerText = '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
                btnRegister.disabled = false;
            }
        });

        // Enter key support
        document.getElementById('reg-password').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') { btnRegister.click(); }
        });
        // --- END: NEW AUTH LOGIC ---
    </script>
</body>
</html>
